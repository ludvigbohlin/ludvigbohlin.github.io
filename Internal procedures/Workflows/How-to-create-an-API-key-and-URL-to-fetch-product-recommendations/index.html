<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>How to create an API key and URL to fetch product rec - CS docs</title>
        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../../..">CS docs</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Start <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../..">Infobaleen Documentation</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Internal procedures <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../Overview-presentations/">Overview presentation</a>
</li>
                                    
<li >
    <a href="../../Add-ons and Solutions/Cases/">Add-ons and Solutions</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Editing the wiki</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../Editing the wiki/Editing-procedures/">Editing procedures</a>
</li>
            
<li >
    <a href="../../Editing the wiki/Writing-in-markdown/">Writing in markdown</a>
</li>
    </ul>
  </li>
                                    
<li >
    <a href="../../G-suite/Create-new-user/">G-suite</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Workflows</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../GA data/">GA data</a>
</li>
            
<li class="active">
    <a href="./">How to create an API key and URL to fetch product rec</a>
</li>
            
<li >
    <a href="../Platform-setup-(import-files,-sources-and-datamodel)/">Platform setup (import files, sources and datamodel)</a>
</li>
            
<li >
    <a href="../Other/">Other</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Kube <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../Kube/Creating-new-platform/">Creating new platform</a>
</li>
                                    
<li >
    <a href="../../../Kube/Public-IP/">Public IP</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Platform <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#">Analytics</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../Platform/Analytics/Dashboards/">Dashboards</a>
</li>
            
<li >
    <a href="../../../Platform/Analytics/Customer Insights/">Customer Insights</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Menu</a>
    <ul class="dropdown-menu">
            
  <li class="dropdown-submenu">
    <a href="#">Account</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../Platform/Menu/Account/API Keys/">API Keys</a>
</li>
            
<li >
    <a href="../../../Platform/Menu/Account/Logout/">Logout</a>
</li>
            
<li >
    <a href="../../../Platform/Menu/Account/Users/">Users</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Admin</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../Platform/Menu/Admin/Clear CH chache/">Clear CH chache</a>
</li>
            
<li >
    <a href="../../../Platform/Menu/Admin/Configuration/">Configuration</a>
</li>
            
<li >
    <a href="../../../Platform/Menu/Admin/Connections/">Connections</a>
</li>
            
<li >
    <a href="../../../Platform/Menu/Admin/Events/">Events</a>
</li>
            
<li >
    <a href="../../../Platform/Menu/Admin/Secrets/">Secrets.md</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Documentation</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../Platform/Menu/Documentation/Agent/">Agent</a>
</li>
            
<li >
    <a href="../../../Platform/Menu/Documentation/API/">API</a>
</li>
            
<li >
    <a href="../../../Platform/Menu/Documentation/New Issue/">New Issue</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Manage Data</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../Platform/Menu/Manage Data/Data Models/">Data Models</a>
</li>
            
<li >
    <a href="../../../Platform/Menu/Manage Data/Import Files/">Import Files</a>
</li>
            
<li >
    <a href="../../../Platform/Menu/Manage Data/Manage-Data/">Manage-Data</a>
</li>
            
<li >
    <a href="../../../Platform/Menu/Manage Data/Results/">Results</a>
</li>
            
<li >
    <a href="../../../Platform/Menu/Manage Data/Sources/">Sources</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Model</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../Platform/Menu/Model/Interactions/">Interactions</a>
</li>
            
<li >
    <a href="../../../Platform/Menu/Model/Overview/">Overview</a>
</li>
            
<li >
    <a href="../../../Platform/Menu/Model/Products/">Products</a>
</li>
            
<li >
    <a href="../../../Platform/Menu/Model/Users/">Users</a>
</li>
    </ul>
  </li>
            
<li >
    <a href="../../../Platform/Menu/Other/Overlaps/">Other</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Segmentations</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../Platform/Segmentations/Auto-targeting/">Auto-targeting</a>
</li>
            
<li >
    <a href="../../../Platform/Segmentations/Clustering/">Clustering</a>
</li>
    </ul>
  </li>
                                    
<li >
    <a href="../../../Platform/Recommendations/Recommendations/">Recommendations</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../GA data/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../Platform-setup-(import-files,-sources-and-datamodel)/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#table-of-contents">Table of Contents</a></li>
        <li class="main "><a href="#how-to-create-an-api-key-and-url-to-fetch-product-recommendations">How to create an API key and URL to fetch product recommendations</a></li>
        <li class="main "><a href="#steps-to-integrate-with-rule">Steps to integrate with Rule</a></li>
        <li class="main "><a href="#integrate-with-rule">Integrate with Rule</a></li>
            <li><a href="#whats-needed">What’s needed</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="table-of-contents">Table of Contents</h1>
<ol>
<li><a href="#how-to-create-an-api-key-and-url-to-fetch-product-recommendations">How to create an API key and URL to fetch product recommendations</a></li>
<li><a href="#steps-to-integrate-with-rule">Steps to integrate with Rule</a></li>
<li><a href="#integrate-with-rule">Integrate with Rule</a><ol>
<li><a href="#what’s-needed">What’s needed</a><ol>
<li><a href="#export-segments">Export segments</a></li>
<li><a href="#personalized-product-recommendations">Personalized product recommendations</a>
<a href="#table-of-contents"></a></li>
</ol>
</li>
</ol>
</li>
</ol>
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h1 id="how-to-create-an-api-key-and-url-to-fetch-product-recommendations">How to create an API key and URL to fetch product recommendations</h1>
<p><strong>Note!</strong> The key is only visible for 1 hour after creation. </p>
<ol>
<li>Go to the three dots on the top right corner of the screen and select "API keys"</li>
<li>Create a API key by pressing the purple plus sign on the right side</li>
<li>Name your API key and select <code>ItemToItems</code>, <code>UserToItems</code>, and <code>ItemData</code></li>
<li>Press "Save"</li>
<li>Copy the API key</li>
<li>Use Bitwarden to send the API key to the customer email. Remember to remove the password protection</li>
<li>After the API key has been sent, email the customer the URL</li>
</ol>
<p><strong>christian note:</strong> <em>We need to standardize how we communicate the tokens. Email is NOT a secure medium. If possible, let the customer setup the API keys in the platform.
Bitwarden can be used with PASSWORD protection.</em> </p>
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h1 id="steps-to-integrate-with-rule">Steps to integrate with Rule</h1>
<ol>
<li>
<p>Under <strong>data model</strong> &gt; <strong>User config</strong> the field <code>email</code> must be set to the role <code>Email</code>
<img alt="image" src="https://user-images.githubusercontent.com/102239423/171419337-eb122526-59b4-4344-9613-542fa24f8a1e.png" /></p>
</li>
<li>
<p>edit the item source used in the data model and add where <code>&lt; &gt;</code> means inputs you need to edit.</p>
</li>
</ol>
<p><code>concat('https://myplatform.infobaleen.com/token/&lt;RULE_API_KEY&gt;/api/v1/data-models/&lt;ID&gt;/item-data?format=og&amp;id=', items.id) og_url,</code>
<img alt="image" src="https://user-images.githubusercontent.com/102239423/171423278-18d58beb-2084-4db7-b02a-61762dcd192c.png" /></p>
<ol>
<li>go to the data model and activate <code>Active</code> and <code>MlMeta</code> for <code>og_url</code>
<img alt="image" src="https://user-images.githubusercontent.com/102239423/171424929-50b87293-dd85-4619-8145-440e3b951f6d.png" /></li>
</ol>
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h1 id="integrate-with-rule">Integrate with Rule</h1>
<p>Take your marketing efforts in Rule to a new level by combining our powerful features of segmentation and personalization with your Rule account. Export segments from your Infobaleen platform directly to Rule as tags and target them in your marketing. Use personalized product recommendations directly in your emails meaning personalized content for each and every recipient.</p>
<p>Here is a summary of how to enable our recommendations and segmentation in Rule.</p>
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h2 id="whats-needed">What’s needed</h2>
<p>The two features requires different actions</p>
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h3 id="export-segments">Export segments</h3>
<ol>
<li>Provide us with an <strong>API key</strong> from your Rule account. The key is generated under Settings /  Developer in the Rule platform. </li>
<li>The user identifier used in Rule must be present as user meta data in the Infobaleen platform. The standard identifier in Rule is <strong>email</strong>. Provide us with information if you use a custom identifier.</li>
</ol>
<p>Once in place, you have a new export target available, “rule”, when exporting a segment from your platform. Exported segments will appear as <strong>tags</strong> in Rule where you can target them with relevant content. </p>
<p>You will also have the ability to <strong>filter users on unsubscribe status from Rule</strong> when creating segments in your Infobaleen platform. These are the available fields.They have either the value 1 (unsubscribed) or 0 (not unsubscribed).</p>
<ul>
<li>rule_email_campaign_unsub</li>
<li>rule_email_transactional_unsub</li>
<li>rule_sms_campaign_unsub</li>
<li>rule_sms_transactional_unsub</li>
</ul>
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h3 id="personalized-product-recommendations">Personalized product recommendations</h3>
<ol>
<li><strong>Make sure your user data in Rule includes the user identifier used in Infobaleen</strong>. If not already present, make sure to include it in your exports to Rule. Rule will use this id to fetch recommendations from the Infobaleen platform.</li>
<li>Select what product meta data Rule will have access to. Rule uses OG-tags present on web pages as product data for recommendations. Either we supply OG-tags from product pages on your website or from your product meta data in the Infobaleen platform. Provide us with the option you prefer.<ul>
<li><strong>Option 1: Use product pages from your site</strong>. Requires <strong>product URLs</strong> to be present in the Infobaleen platform. This has the benefit of you having greater control over  what product data is available in Rule, ex easier to add new product meta data if needed, and the data Rule uses will always be up to date. Else, as data is synchronized once a day in the Infobaleen platform, there will be a delay between a change on your side and the data being updated in the Infobaleen platform and   what's available to Rule.   </li>
<li><strong>Option 2: Use product meta data available in the Infobaleen platform</strong>. Contact us and we will configure your platform.</li>
</ul>
</li>
<li><strong>Create an API profile</strong> in your Infobaleen platform. This will allow you to configure the recommendations used by Rule directly from the platform. </li>
<li><strong>Create an API key</strong> in your Infobaleen platform with access to the api-profile created in the previous step. This is done under the settings menu / Account / API Keys.</li>
<li>Contact Rule for <strong>a custom email template</strong> that uses personalized recommendations, and provide them with a link to the profile with recommendations from your platform in the form: https://myplatform.infobaleen.com/token/<RULE_API_KEY>/api/v1/api-profiles/{ID}/recommendations/user-to-items?User={USERID}&amp;Limit={LIMIT}
Note, USERID and LIMIT are variables that Rule will replace. RULE_API_KEY are from the previous step.</li>
</ol>
<p>Once all is in place, you can send personalized emails that are dynamically populated with configurable product recommendations from Infobaleen at sending time.</p>
<p>Having multiple templates for personalized recommendations can be a step to take it even further. Create multiple profiles with specific business rules and have Rule create a template for each. Add categorized blocks with personalized recommendations in your content where you filter recommendations on specific category data. As an example one block with “Your recommendations in travel” and another with “Your recommendations from our latest products”. Note that all profiles can use the same API key.</p>
<p><a href="#table-of-contents"><em>Back to top</em></a></p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../..",
                shortcuts = {"search": 83, "next": 78, "help": 191, "previous": 80};
        </script>
        <script src="../../../js/base.js" defer></script>
        <script src="../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
