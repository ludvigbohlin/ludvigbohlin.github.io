<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../../img/favicon.ico">
        <title>Table of Contents - CS docs</title>
        <link href="../../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../../../..">CS docs</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Start <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../..">Index</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Internal procedures <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../../Internal procedures/Add-ons and Solutions/Cases/">Add-ons and Solutions</a>
</li>
                                    
<li >
    <a href="../../../../Internal procedures/Editing the wiki/Editing-procedures.md.">Editing the wiki</a>
</li>
                                    
<li >
    <a href="../../../../Internal procedures/Add-ons and Solutions/Cases/">Editing the wiki</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Kube <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../Analytics/Dashboards/">Analytics -> Dashboard</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Platform <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../Analytics/Dashboards/">Analytics -> Dashboard</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#table-of-contents">Table of Contents</a></li>
        <li class="main "><a href="#data-models">Data Models</a></li>
            <li><a href="#data-model-expressions-click-house">Data model expressions (Click house)</a></li>
        <li class="main "><a href="#sources">Sources</a></li>
            <li><a href="#centra-queries">Centra Queries</a></li>
            <li><a href="#voyado-queries">Voyado Queries</a></li>
            <li><a href="#query-expressions">Query expressions</a></li>
        <li class="main "><a href="#results">Results</a></li>
            <li><a href="#dummy1">dummy1</a></li>
            <li><a href="#dummy2">dummy2</a></li>
        <li class="main "><a href="#import-files">Import Files</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="table-of-contents">Table of Contents</h1>
<ol>
<li><a href="#data-models">Data Models</a><ol>
<li><a href="#data-model-expressions-click-house">Data model expressions (Click house)</a></li>
</ol>
</li>
<li><a href="#sources">Sources</a><ol>
<li><a href="#centra-queries">Centra Queries</a><ol>
<li><a href="#procedure">Procedure</a></li>
<li><a href="#interactions">Interactions  </a></li>
<li><a href="#items">Items</a></li>
<li><a href="#users">Users</a></li>
<li><a href="#variant-model">Variant model </a><ol>
<li><a href="#interactions">Interactions </a><ol>
<li><a href="#id-columns">Id columns </a></li>
</ol>
</li>
<li><a href="#items">Items</a><ol>
<li><a href="#id-columns">Id columns </a></li>
</ol>
</li>
<li><a href="#users">Users</a><ol>
<li><a href="#id-columns">Id columns </a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#no-size-model">No size model </a></li>
<li><a href="#example-rows-with-explanation">Example rows with explanation</a></li>
</ol>
</li>
<li><a href="#voyado-queries">Voyado Queries</a><ol>
<li><a href="#procedure">Procedure</a></li>
<li><a href="#interactions">Interactions</a>
        1. <a href="#id-columns">Id columns </a></li>
<li><a href="#stores">Stores</a>
        1. <a href="#id-column">Id column</a></li>
<li><a href="#contacts">Contacts</a>
        1. <a href="#id-column">Id column</a></li>
</ol>
</li>
<li><a href="#query-expressions">Query expressions</a></li>
</ol>
</li>
<li><a href="#results">Results</a><ol>
<li><a href="#dummy1">dummy1</a></li>
<li><a href="#dummy2">dummy2</a></li>
</ol>
</li>
<li><a href="#import-files">Import Files</a>
<a href="#table-of-contents"></a></li>
</ol>
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h1 id="data-models">Data Models</h1>
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h2 id="data-model-expressions-click-house">Data model expressions (Click house)</h2>
<p><code>SUM()</code> Summarize a value, for example SUM(returned_quantity) returns the total amount of returned quantity (over chosen period of time) </p>
<p><code>uniq()</code> counts the amount of unique values, for example uniq(user) returns the amount of unique users.  </p>
<p><code>uniqExact()</code> Is almost the same as uniq(), however uniq() may have a very small inaccuracy (that most often doesn't matter at all), but if it's important to have for example 100.002 (correct) instead of 100.000, use uniqExact(). The reason for this is simply that uniq() is less demanding.</p>
<p><code>countIf()</code> this counts +1 for each time an argument is correct on an interaction (row). <code>Example</code>: let's say there's 10 interactions (ten rows) in a table with a column that's currency. On 7 of the 10 rows the currency column consists of 'SEK', if we now use countIf(currency = 'SEK') we will get the value 7.  </p>
<p><code>sumIf()</code><br />
sumIf(Value that will be summarized when, X = N)  <code>Example</code>: sumIf(revenue, currency = 'SEK')  </p>
<p><code>uniqIf()</code></p>
<p>multiIf(boolean, result_1, boolean, result_2, ..., boolean, result_n, else_this)<br />
multiIf(name = 'red', colour, name = 'big', 'size', 'no data')</p>
<p>etc...</p>
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h1 id="sources">Sources</h1>
<p>If you are looking for information about how sources gets set up, how they work and what they are, click <a href="https://github.com/infobaleen/customer-success/blob/main/Documentation/Internal%20procedures/Workflows/Platform-setup-(import-files,-sources-and-datamodel).md#2-create-sources">here</a>  </p>
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h2 id="centra-queries">Centra Queries</h2>
<hr />
<p>Procedure   1</p>
<p>Interactions    1</p>
<p>Items   2</p>
<p>Users   3</p>
<hr />
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h3 id="procedure">Procedure</h3>
<p>Setup config
Make arbitrary query toward centra
This will trigger proxy sync, the .gz files will appear once completed, duration 1-5h</p>
<hr />
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h3 id="interactions">Interactions</h3>
<p>Id columns: id i import / user,id i model source</p>
<pre><code>SELECT  
  `line.Id` AS id,
  `order.Customer.Id` AS user,
  unixTimestamp(`order.OrderDate`, '2006-01-02T15:04:05-0700') AS ts,  
  concat(`line.ProductVariant.Id`,'_',`line.ProductSize.Size.Id`) AS item,  
  toFloat(`line.LineValue.FormattedValue`)*toFloat(`order.CurrencyBaseRate`) AS revenue,  
  round(`line.Quantity`*`order.CurrencyBaseRate`*`line.UnitOriginalPrice.FormattedValue`,2) AS full_price,  
  `line.ProductVariant.Id` AS variant_id,  
  `line.ProductVariant.Product.Id` AS product_id,  
  `line.ProductVariant.VariantNumber` AS variant_number,  
  `line.ProductSize.Id` AS product_size,  
  `line.ProductSize.SKU` AS size_sku,  
  `line.ProductSize.SizeNumber` AS size_number,  
  `line.ProductSize.GTIN` AS size_gtin,  
  `line.ProductSize.Size.Id` AS size_id,  
  `line.ProductSize.Size.Name` AS size_name,  
  toFloat(`line.LineValue.FormattedValue`) AS Non_converted_value,  
  `line.UnitPrice.FormattedValue` AS Unitprice_formatted_value,  
  `line.UnitOriginalPrice.FormattedValue` AS Unit_original_price_formatted_value,  
  `line.Quantity` AS quantity,  
  `line.ReturnedQuantity` AS returned_quantity,  
  `line.CancelledQuantity` AS cancelled_quantity,  
  `line.ProductNumber` AS product_number,  
  `line.TypeName` AS type,  
  round(`line.DiscountPercent`,0) AS discount_percent,  
  `line.TaxPercent` AS tax_percent,  
  `order.Id` AS order_id,  
  `order.Number` AS order_number,  
  unixTimestamp(`order.CreatedAt`, '2006-01-02T15:04:05-0700') AS order_created_at,  
  `order.Status` AS order_status,  
  `order.GrandTotal.FormattedValue` AS total order value inc VAT,  
  `order.Shipments[0].CarrierInformation.ServiceName` AS carrier_service_name,  
  `order.Shipments[0].CarrierInformation.CarrierName` AS carrier_name,  
  `order.Market.Name` AS order_market,  
  `order.Store.Name` AS store,  
  `order.Country.Name` AS country,  
  `order.PaymentMethod.Name` AS order_payment_method,  
  `order.Totals.LineValues` AS order_totals_values,  
  `order.Totals.Shipping` AS order_total_shipping,  
  `order.Totals.Discounts` AS order_total_discounts,  
  `order.Totals.Handling` AS order_totals_handling,  
  `order.CurrencyBaseRate` AS order_currency_base_rate,  
  `order.Discounts` AS order_discounts,  
  `order.Discounts.Len` AS order_discounts_len,  
  `order.DiscountsApplied.Name` AS discount_name,  
  `order.DiscountsApplied.Method` AS order_discounts_applied_method,  
  `order.DiscountsApplied.Value` AS order_discounts_applied_value,  
  `order.DiscountsApplied.Discount.Codes` discount_codes,  
  Currency AS currency,  
  CurrencyOK AS currency_ok  
FROM`interactions.gz`  
</code></pre>

<hr />
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h3 id="items">Items</h3>
<p>Id columns : item</p>
<pre><code>SELECT
    concat(`variant.Id`,'_',`variant.productSize.Size.Id`) AS item, 
    `prod.Name` AS prod_name,  
    `variant.MediaURL` AS variant_media_url,  
    `variant.Id` AS id,  
    `variant.Name` AS variant_name,  
    `variant.Status` AS variant_status,  
    `variant.StockOffset` AS variant_stock_offset,  
    `variant.InternalName` AS variant_internal_name,  
    `variant.variantNumber` AS variant_variant_number,  
    `variant.UnitCost.FormattedValue` AS variant_unit_cost_formatted_value,  
    `variant.productSize.Id` AS variant_product_size_id,  
    `variant.productSize.GTIN` AS variant_product_size_gtin,  
    `variant.productSize.SizeNumber` AS variant_product_size_number,  
    `variant.productSize.SKU` AS variant_product_size_sku,  
    `variant.productSize.Size.Id` AS variant_product_size_size_id,  
    `variant.productSize.Size.Name` AS variant_product_size_size_name,  
    `prod.Id` AS prod_id,  
    `prod.ProductNumber` AS prod_product_number,  
    `prod.Brand.Name` AS prod_brand_name,  
    `prod.CountryOfOrigin.Name` AS prod_country_of_origin_name,  
    `prod.Collection.Name` AS prod_collection_name,  
    `prod.Status` AS prod_status,  
    `prod.HarmonizedCommodityCode` AS prod_harmonized_commodity_code,  
    `prod.Folder.Name` AS prod_folder_name,  
    `display.Store.Name` AS display_store_name,  
    `display.Status` AS display_status,  
    `display.Name` AS display_name,  
    `display.DisplayItem.Id` AS display_item_id,  
    `display.Categories` AS display_categories,  
    `display.Category1` AS display_category_1,  
    `display.Category2` AS display_category_2,  
    `display.Category3` AS display_category_3,  
    `display.CategoryUri` AS display_category_uri,  
    `display.Uri` AS display_uri,  
    `variant.productSize.Size.AvailableNowQuantity` AS variant_available_now_quantity,  
    `variant.Price` AS variant_price,  
    `variant.Currency` AS variant_currency,  
    `variant.Campaign_DiscountPercent` AS variant_campaign_discount_percent,  
    `variant.Campaign_FixedPrice` AS variant_campaign_fixed_price,  
    `variant.Campaign_FixedPrice_Currency` AS variant_campaign_fixed_price_currency,  
    market AS market,  

      concat(`prod.Brand.Name`, ', ', `prod.Name`,   
         if(`variant.Name` != '' OR `variant.productSize.Size.Name` != '', ' ', ''),  
         if(`variant.Name` != '', concat('[',`variant.Name`, ']'),''),  
         if(`variant.productSize.Size.Name` != '', concat('[',`variant.productSize.Size.Name`,']'), '')   
         ) format
FROM `items.gz`
</code></pre>

<hr />
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h3 id="users">Users</h3>
<p>Id columns : user</p>
<pre><code>SELECT  
`customer.Id` AS user,  
    `customer.IsAnonymized` AS anonymized,  
    `customer.TotalOrders` AS total_orders,  
    unixTimestamp(`customer.CreatedAt`, '2006-01-02T15:04:05-0700') AS created_at,  
    unixTimestamp(`customer.UpdatedAt`, '2006-01-02T15:04:05-0700') AS updated_at,  
    `customer.Store.Name` AS store,  
    `customer.Email` AS email,  
    `customer.CellPhoneNumber` AS phone  
FROM `users.gz`  
</code></pre>

<hr />
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h3 id="variant-model">Variant model</h3>
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h4 id="interactions_1">Interactions</h4>
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h5 id="id-columns">Id columns</h5>
<p><code>user,id</code></p>
<pre><code>SELECT  
  `order.Customer.Id` AS user,
  `line.Id` AS id,
  unixTimestamp(`order.OrderDate`, '2006-01-02T15:04:05-07:00') AS ts,  
  `line.ProductVariant.Id` AS item,  
  toFloat(`line.LineValue.FormattedValue`)*toFloat(`order.CurrencyBaseRate`) AS revenue,  
  round(`line.Quantity`*`order.CurrencyBaseRate`*`line.UnitOriginalPrice.FormattedValue`,2) AS full_price,  
  `line.ProductVariant.Id` AS variant_id,  
  `line.ProductVariant.Product.Id` AS product_id,  
  `line.ProductVariant.VariantNumber` AS variant_number,  
  `line.ProductSize.Id` AS product_size,  
  `line.ProductSize.SKU` AS size_sku,  
  `line.ProductSize.SizeNumber` AS size_number,  
  `line.ProductSize.GTIN` AS size_gtin,  
  `line.ProductSize.Size.Id` AS size_id,  
  `line.ProductSize.Size.Name` AS size_name,  
  toFloat(`line.LineValue.FormattedValue`) AS Non_converted_value,  
  `line.UnitPrice.FormattedValue` AS Unitprice_formatted_value,  
  `line.UnitOriginalPrice.FormattedValue` AS Unit_original_price_formatted_value,  
  `line.Quantity` AS quantity,  
  `line.ReturnedQuantity` AS returned_quantity,  
  `line.CancelledQuantity` AS cancelled_quantity,  
  `line.ProductNumber` AS product_number,  
  `line.TypeName` AS type,  
  round(`line.DiscountPercent`,0) AS discount_percent,  
  `line.TaxPercent` AS tax_percent,  
  `order.Id` AS order_id,  
  `order.Number` AS order_number,  
  unixTimestamp(`order.CreatedAt`, '2006-01-02T15:04:05-0700') AS order_created_at,  
  `order.Status` AS order_status,  
  `order.GrandTotal.FormattedValue` AS total_order_value_inc_VAT,  
  `order.Shipments[0].CarrierInformation.ServiceName` AS carrier_service_name,  
  `order.Shipments[0].CarrierInformation.CarrierName` AS carrier_name,  
  `order.Market.Name` AS order_market,  
  `order.Store.Name` AS store,  
  `order.Country.Name` AS country,  
  `order.PaymentMethod.Name` AS order_payment_method,  
  `order.Totals.LineValues` AS order_totals_values,  
  `order.Totals.Shipping` AS order_total_shipping,  
  `order.Totals.Discounts` AS order_total_discounts,  
  `order.Totals.Handling` AS order_totals_handling,  
  `order.CurrencyBaseRate` AS order_currency_base_rate,  
  `order.Discounts` AS order_discounts,  
  `order.Discounts.Len` AS order_discounts_len,  
  `order.DiscountsApplied.Name` AS discount_name,  
  `order.DiscountsApplied.Method` AS discounts_applied_method,  
  `order.DiscountsApplied.Value` AS discounts_applied_value,  
  `order.DiscountsApplied.Discount.Codes` AS discount_codes,  
  Currency AS currency,  
  CurrencyOK AS currency_ok  
FROM `interactions.gz`
</code></pre>

<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h4 id="items_1">Items</h4>
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h5 id="id-columns_1">Id columns</h5>
<p><code>item</code></p>
<pre><code>SELECT
    `variant.Id` AS item, 
    `prod.Name` AS prod_name,  
    `variant.MediaURL` AS variant_media_url,  
    `variant.Id` AS variant_id,  
    `variant.Name` AS variant_name, 
    --`variant.productSize.SKU` AS variant_product_size_sku,   
    `variant.Status` AS variant_status,  
    `variant.StockOffset` AS variant_stock_offset,  
    `variant.InternalName` AS variant_internal_name,  
    `variant.variantNumber` AS variant_variant_number,  
    `variant.UnitCost.FormattedValue` AS variant_unit_cost_formatted_value,  
    --`variant.productSize.Id` AS variant_product_size_id,  
    --`variant.productSize.GTIN` AS variant_product_size_gtin,  
    --`variant.productSize.SizeNumber` AS variant_product_size_size_number,  
    --`variant.productSize.Size.Id` AS variant_product_size_size_id,  
    --`variant.productSize.Size.Name` AS variant_product_size_size_name,  
    `prod.Id` AS prod_id,  
    `prod.ProductNumber` AS prod_product_number,  
    `prod.Brand.Name` AS prod_brand_name,  
    `prod.CountryOfOrigin.Name` AS prod_country_of_origin_name,  
    `prod.Collection.Name` AS prod_collection_name,  
    `prod.Status` AS prod_status,  
    `prod.HarmonizedCommodityCode` AS prod_harmonized_commodity_code,  
    `prod.Folder.Name` AS prod_folder_name,  
    `display.Store.Name` AS display_store_name,  
    `display.Status` AS display_status,  
    `display.Name` AS display_name,  
    `display.DisplayItem.Id` AS display_display_item_id,  
    `display.Categories` AS display_categories,  
    `display.Category1` AS display_category_1,  
    `display.Category2` AS display_category_2,  
    `display.Category3` AS display_category_3,  
    `display.CategoryUri` AS display_category_uri,  
    `display.Uri` AS display_uri,  
    --`variant.productSize.Size.AvailableNowQuantity` AS available_now_quantity,  
    `variant.Price` AS variant_price,  
    `variant.Currency` AS variant_currency,  
    `variant.Campaign_DiscountPercent` AS variant_campaign_discount_percent,  
    `variant.Campaign_FixedPrice` AS variant_campaign_fixed_price,  
    `variant.Campaign_FixedPrice_Currency` AS variant_campaign_fixed_price_currency,  
    market AS market,  

      concat(`prod.Brand.Name`, ', ', `prod.Name`,
         if(`variant.Name` != '', concat(' [',`variant.Name`, ']'),'')  
         ) format
FROM `items.gz`
</code></pre>

<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h4 id="users_1">Users</h4>
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h5 id="id-columns_2">Id columns</h5>
<p><code>user</code></p>
<pre><code>SELECT  
    `customer.Id` AS user,  
    `customer.IsAnonymized` AS anonymized,  
    `customer.TotalOrders` AS total_orders,  
    unixTimestamp(`customer.CreatedAt`, '2006-01-02T15:04:05-0700') AS created_at,  
    unixTimestamp(`customer.UpdatedAt`, '2006-01-02T15:04:05-0700') AS updated_at,  
    `customer.Store.Name` AS store,  
    `customer.Email` AS email,  
    `customer.CellPhoneNumber` AS phone  
FROM `users.gz` 
</code></pre>

<hr />
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h3 id="no-size-model">No size model</h3>
<p>for Item source called ‘no size model - items’</p>
<pre><code>SELECT 
    variantId AS id,  
    groupcoalesce(format) AS format,  
    groupcoalesce(productName) AS product_name,  
    groupcoalesce(variantName) AS variant_name,  
    groupcoalesce(variantStatus) AS variant_status,  
    groupcoalesce(brand) AS brand,  
    groupcoalesce(`prod.Folder.Name`) AS prod_folder_name,  
    groupcoalesce(collection) AS collection,  
    groupcoalesce(productNumber) AS product_number,  
    groupcoalesce(price) AS price,  
    groupcoalesce(availableNowQuantity) AS available_now_quantity,  
    groupcoalesce(countryOfOrigin) AS country_of_origin,  
    groupcoalesce(mediaURL) AS media_url,  
    groupcoalesce(unitCost) AS unit_cost,  
    groupcoalesce(productStatus) AS product_status,  
    groupcoalesce(variantInternalName) AS variant_internal_name,  
    groupcoalesce(displayCategory1) AS display_category_1,  
    groupcoalesce(displayCategory2) AS display_category_2,  
    groupcoalesce(displayCategory3) AS display_category_3,  
    groupcoalesce(displayItemId) AS display_item_id  

FROM `centra_products_import`  

GROUP BY variantId  
</code></pre>

<hr />
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h3 id="example-rows-with-explanation">Example rows with explanation</h3>
<p>Coalesce (<code>display.Name</code>, <code>prod.Name</code>, <code>variant.Id</code>) AS format 
Explanation: Choose display.Name if it exists, otherwise check prod.Name, and lastly variant.Id.  </p>
<p>Concat (<code>line.ProductVariant.Id</code>,'<em>',<code>line.ProductSize.Size.Id</code>) AS item 
Explanation: This will merge the two lines, for example Concat (Hello, '</em>', you) would concat to Hello_you </p>
<p>unixTimestamp (<code>order.CreatedAt</code>, '2006-01-02T15:04:05-0700') AS order_created_at, 
    Explanation: This will convert a date into number form </p>
<hr />
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h2 id="voyado-queries">Voyado Queries</h2>
<p><a href="#table-of-contents">Back to top</a></p>
<hr />
<p>Procedure   1</p>
<p>Items   2  </p>
<p>Users   3</p>
<p>Interactions    4  </p>
<hr />
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h3 id="procedure_1">Procedure</h3>
<p>Setup config</p>
<hr />
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h3 id="interactions_2">Interactions</h3>
<p>From <code>RAW - receiptItems</code> + <code>RAW - stores</code></p>
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h5 id="id-columns_3">Id columns</h5>
<p><code>id,user</code></p>
<pre><code>SELECT 
  user,
  t.id id,
  unix_timestamp(transactionDateTime, '2006-01-02T15:05:05Z') ts,
  articleNumber item,
  receiptItemId,
  receiptId,
  t.type type,
  quantity,
  grossPaidPrice price,
  awardsBonus,
  stores.name store,
  stores.city store_city,
  stores.country store_country,
  stores.externalId butikskod,
  stores.type store_type
FROM `RAW - receiptItems` t
LEFT JOIN `RAW - store` stores on t.storeId = stores.id
WHERE user != ''
</code></pre>

<hr />
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h3 id="stores">Stores</h3>
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h5 id="id-column">Id column</h5>
<p><code>id</code></p>
<pre><code>SELECT
    storeId id,
    name,
    isDeleted,
    city,
    country,
    zipCode,
    street,
    region,
    externalId,
    type,
    active,
    changeType

FROM `store/byExportDate/*/*/*/*.csv`

-- WHERE unix_timestamp(implode(slice(split(path(),'/'), 2,5), '/'), '2006/01/02') &gt;= now()-7*24*60*60
</code></pre>

<hr />
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h3 id="contacts">Contacts</h3>
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h5 id="id-column_1">Id column</h5>
<p><code>id</code></p>
<pre><code>SELECT 
  contactId id,
  contactType,
  isApproved,
  isDeleted,
  gender,
  age,
  zipCode,
  city,
  countryCode,
  acceptsEmail,
  acceptsSms,
  acceptsPostal,
  statusEmail,
  statusSms,
  statusPostal,
  rfm,
  recency,
  frequency,
  monetary,
  latestNpsGrade,
  latestNpsDateTime,
  registrationDateTime,
  lastModifiedDateTime,
  deletedDateTime,
  deletedReason,
  recruitedStoreId,
  currentStoreId,
  changeType
FROM `allContacts/byExportDate/*/*/*/*.csv`
WHERE unix_timestamp(implode(slice(split(path(),'/'), 2,5), '/'), '2006/01/02') &gt;= now()-7*24*60*60
</code></pre>

<hr />
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h2 id="query-expressions">Query expressions</h2>
<p>you need to enclose variable names that contain other characters than letters and numbers with <code>backticks</code> ``,<br />
this includes whitespace ' ', dot '.', etc...</p>
<p>SELECT * </p>
<p>LEFT JOIN</p>
<p>coalese</p>
<p>toFloat()</p>
<p>unixTimestamp()</p>
<p>split()</p>
<p>slice()</p>
<p>etc...</p>
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h1 id="results">Results</h1>
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h2 id="dummy1">dummy1</h2>
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h2 id="dummy2">dummy2</h2>
<p><a href="#table-of-contents"><em>Back to top</em></a></p>
<h1 id="import-files">Import Files</h1>
<p><a href="#table-of-contents"><em>Back to top</em></a></p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../../..",
                shortcuts = {"search": 83, "next": 78, "help": 191, "previous": 80};
        </script>
        <script src="../../../../js/base.js" defer></script>
        <script src="../../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
